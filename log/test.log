---------------------------------------------------------------------------
Admin::Password encryption: test_0001_must generate a salt and hash on save
---------------------------------------------------------------------------
  [1m[36m (10.6ms)[0m  [1mALTER TABLE "admins" DISABLE TRIGGER ALL;ALTER TABLE "images" DISABLE TRIGGER ALL;ALTER TABLE "products" DISABLE TRIGGER ALL;ALTER TABLE "profiles" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "admins"[0m
  [1m[35mFixture Insert (1.3ms)[0m  INSERT INTO "admins" ("id", "email", "password_digest", "created_at", "updated_at") VALUES (100, 'one@store.com', '$2a$10$rIeH0X.cSYan3T6ZRn62u.RTRyPPHNGvEdzV1q99TJW3WFPjwcVPK', '2013-03-06 21:36:17', '2013-03-06 21:36:17')
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "admins" ("id", "email", "password_digest", "created_at", "updated_at") VALUES (200, 'second@store.com', '$2a$10$rIeH0X.cSYan3T6ZRn62u.RTRyPPHNGvEdzV1q99TJW3WFPjwcVPK', '2013-03-06 21:36:17', '2013-03-06 21:36:17')[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "images"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "images" ("created_at", "updated_at", "id") VALUES ('2013-03-06 21:36:17', '2013-03-06 21:36:17', 980190962)[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "images" ("created_at", "updated_at", "id") VALUES ('2013-03-06 21:36:17', '2013-03-06 21:36:17', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "products"[0m
  [1m[35mFixture Insert (1.1ms)[0m  INSERT INTO "products" ("name", "description", "price", "active", "tags", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, 'MyText', '2013-03-06 21:36:17', '2013-03-06 21:36:17', 980190962)
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "products" ("name", "description", "price", "active", "tags", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, 'MyText', '2013-03-06 21:36:17', '2013-03-06 21:36:17', 298486374)[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "profiles"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "profiles" ("name", "admin_id", "created_at", "updated_at", "id") VALUES ('Super admin 1', 100, '2013-03-06 21:36:17', '2013-03-06 21:36:17', 980190962)[0m
  [1m[35m (8.5ms)[0m  COMMIT
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "admins" ENABLE TRIGGER ALL;ALTER TABLE "images" ENABLE TRIGGER ALL;ALTER TABLE "products" ENABLE TRIGGER ALL;ALTER TABLE "profiles" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (1.7ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAdmin Exists (1.7ms)[0m  SELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1
  [1m[36mSQL (9.6ms)[0m  [1mINSERT INTO "admins" ("created_at", "email", "password_digest", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Wed, 06 Mar 2013 15:36:17 CST -06:00], ["email", "user@store.com"], ["password_digest", "$2a$04$3GeagmGskY6hMCM2yR21Au5s1iN8enqS/uNqld4LwSmyMRd9xN7oe"], ["updated_at", Wed, 06 Mar 2013 15:36:17 CST -06:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
-----------------------------------------------------------------------------------
Admin::Password encryption: test_0002_must authenticate user with valid credentials
-----------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAdmin Exists (0.9ms)[0m  SELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "admins" ("created_at", "email", "password_digest", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Wed, 06 Mar 2013 15:36:17 CST -06:00], ["email", "user@store.com"], ["password_digest", "$2a$04$VCLfiNBwanScvE3CLviBzeJUXWJbuV1k4sseYjYb/4u1BJZe4yabK"], ["updated_at", Wed, 06 Mar 2013 15:36:17 CST -06:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAdmin Load (4.3ms)[0m  [1mSELECT "admins".* FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
----------------------------------------------------------------
Admin::Validations: test_0002_must be invalid without attributes
----------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAdmin Exists (1.0ms)[0m  SELECT 1 AS one FROM "admins" WHERE "admins"."email" IS NULL LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
-------------------------------------------
Admin::Validations: test_0001_must be valid
-------------------------------------------
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mAdmin Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
---------------------------------------------------------------
Admin::Validations: test_0003_must invalid without unique email
---------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mAdmin Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m  INSERT INTO "admins" ("created_at", "email", "password_digest", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Wed, 06 Mar 2013 15:36:17 CST -06:00], ["email", "user@store.com"], ["password_digest", "$2a$04$680s4Vr65HtIDGElc6NWkO285aAQYBOXPFfwxf66zaf2fGM1uIQ3a"], ["updated_at", Wed, 06 Mar 2013 15:36:17 CST -06:00]]
  [1m[36m (1.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAdmin Exists (0.9ms)[0m  SELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
-------------------------------------------------------------------------------
Admin::Validations::Email: test_0001_must be invalid with invalid email address
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mAdmin Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'some text' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
------------------------------------------------------------------------------------------
Admin::Validations::Password: test_0002_must be invalid when password is less than 6 chars
------------------------------------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAdmin Exists (1.0ms)[0m  SELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
-------------------------------------------------------------------------------------------------
Admin::Validations::Password: test_0001_must be invalid when password confirmation does not match
-------------------------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mAdmin Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
------------------------------
Image: test_0001_must be valid
------------------------------
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
-----------------------------------------------------
Product: test_0002_must be invalid without attributes
-----------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
--------------------------------
Product: test_0001_must be valid
--------------------------------
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
--------------------------------
Profile: test_0001_must be valid
--------------------------------
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mAdmin Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'a@store.com' LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "admins" ("created_at", "email", "password_digest", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Wed, 06 Mar 2013 15:36:17 CST -06:00], ["email", "a@store.com"], ["password_digest", "$2a$04$0GmQ1Ho4VtTn1X3PrbdpyOvwoOv8rNmgoVOm8p2M0Xi1HnU6Hcvvi"], ["updated_at", Wed, 06 Mar 2013 15:36:17 CST -06:00]]
  [1m[36m (1.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAdmin Exists (1.1ms)[0m  SELECT 1 AS one FROM "admins" WHERE ("admins"."email" = 'a@store.com' AND "admins"."id" != 204) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
-----------------------------------------------------
Profile: test_0002_must be invalid without attributes
-----------------------------------------------------
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
---------------------------------------------------------------------------
Admin::Password encryption: test_0001_must generate a salt and hash on save
---------------------------------------------------------------------------
  [1m[36m (10.6ms)[0m  [1mALTER TABLE "admins" DISABLE TRIGGER ALL;ALTER TABLE "images" DISABLE TRIGGER ALL;ALTER TABLE "products" DISABLE TRIGGER ALL;ALTER TABLE "profiles" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "admins"[0m
  [1m[35mFixture Insert (1.3ms)[0m  INSERT INTO "admins" ("id", "email", "password_digest", "created_at", "updated_at") VALUES (100, 'one@store.com', '$2a$10$rIeH0X.cSYan3T6ZRn62u.RTRyPPHNGvEdzV1q99TJW3WFPjwcVPK', '2013-03-06 21:37:07', '2013-03-06 21:37:07')
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "admins" ("id", "email", "password_digest", "created_at", "updated_at") VALUES (200, 'second@store.com', '$2a$10$rIeH0X.cSYan3T6ZRn62u.RTRyPPHNGvEdzV1q99TJW3WFPjwcVPK', '2013-03-06 21:37:07', '2013-03-06 21:37:07')[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "images"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "images" ("created_at", "updated_at", "id") VALUES ('2013-03-06 21:37:07', '2013-03-06 21:37:07', 980190962)[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "images" ("created_at", "updated_at", "id") VALUES ('2013-03-06 21:37:07', '2013-03-06 21:37:07', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "products"[0m
  [1m[35mFixture Insert (1.1ms)[0m  INSERT INTO "products" ("name", "description", "price", "active", "tags", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, 'MyText', '2013-03-06 21:37:07', '2013-03-06 21:37:07', 980190962)
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "products" ("name", "description", "price", "active", "tags", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, 'MyText', '2013-03-06 21:37:07', '2013-03-06 21:37:07', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "profiles"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "profiles" ("name", "admin_id", "created_at", "updated_at", "id") VALUES ('Super admin 1', 100, '2013-03-06 21:37:07', '2013-03-06 21:37:07', 980190962)[0m
  [1m[35m (8.8ms)[0m  COMMIT
  [1m[36m (1.1ms)[0m  [1mALTER TABLE "admins" ENABLE TRIGGER ALL;ALTER TABLE "images" ENABLE TRIGGER ALL;ALTER TABLE "products" ENABLE TRIGGER ALL;ALTER TABLE "profiles" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAdmin Exists (1.7ms)[0m  SELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1
  [1m[36mSQL (8.6ms)[0m  [1mINSERT INTO "admins" ("created_at", "email", "password_digest", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Wed, 06 Mar 2013 15:37:07 CST -06:00], ["email", "user@store.com"], ["password_digest", "$2a$04$xz2XPuOKrgOlC1dkwTuLvOFX6jgeiX9NbUQOXkUpWfUpgXwsWx7Ku"], ["updated_at", Wed, 06 Mar 2013 15:37:07 CST -06:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
-----------------------------------------------------------------------------------
Admin::Password encryption: test_0002_must authenticate user with valid credentials
-----------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAdmin Exists (0.9ms)[0m  SELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "admins" ("created_at", "email", "password_digest", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Wed, 06 Mar 2013 15:37:07 CST -06:00], ["email", "user@store.com"], ["password_digest", "$2a$04$c6W2lcp/3QQmWFdsY0mywuuxXNKvZmYK1BHWj2McdwsAe.rqTdsIG"], ["updated_at", Wed, 06 Mar 2013 15:37:07 CST -06:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAdmin Load (1.2ms)[0m  [1mSELECT "admins".* FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  ROLLBACK
---------------------------------------------------------------
Admin::Validations: test_0003_must invalid without unique email
---------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mAdmin Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "admins" ("created_at", "email", "password_digest", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Wed, 06 Mar 2013 15:37:07 CST -06:00], ["email", "user@store.com"], ["password_digest", "$2a$04$h30C349o2cf8inV0rGgSNetCCs3FmTweii0NBSLDAfSQl74Rvf2Ui"], ["updated_at", Wed, 06 Mar 2013 15:37:07 CST -06:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAdmin Exists (1.0ms)[0m  SELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
----------------------------------------------------------------
Admin::Validations: test_0002_must be invalid without attributes
----------------------------------------------------------------
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mAdmin Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "admins" WHERE "admins"."email" IS NULL LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
-------------------------------------------
Admin::Validations: test_0001_must be valid
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAdmin Exists (0.9ms)[0m  SELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
-------------------------------------------------------------------------------
Admin::Validations::Email: test_0001_must be invalid with invalid email address
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mAdmin Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'some text' LIMIT 1[0m
  [1m[35m (1.8ms)[0m  ROLLBACK
-------------------------------------------------------------------------------------------------
Admin::Validations::Password: test_0001_must be invalid when password confirmation does not match
-------------------------------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mAdmin Exists (1.6ms)[0m  SELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
------------------------------------------------------------------------------------------
Admin::Validations::Password: test_0002_must be invalid when password is less than 6 chars
------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mAdmin Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'user@store.com' LIMIT 1[0m
  [1m[35m (1.2ms)[0m  ROLLBACK
------------------------------
Image: test_0001_must be valid
------------------------------
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
--------------------------------
Product: test_0001_must be valid
--------------------------------
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
-----------------------------------------------------
Product: test_0002_must be invalid without attributes
-----------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
-----------------------------------------------------
Profile: test_0002_must be invalid without attributes
-----------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
--------------------------------
Profile: test_0001_must be valid
--------------------------------
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mAdmin Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "admins" WHERE "admins"."email" = 'a@store.com' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "admins" ("created_at", "email", "password_digest", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Wed, 06 Mar 2013 15:37:07 CST -06:00], ["email", "a@store.com"], ["password_digest", "$2a$04$3PTjKVf6aJdlzM7ZPCwnU.4n14DHdXm9SEVPOVgLesjzq.tFm7qi2"], ["updated_at", Wed, 06 Mar 2013 15:37:07 CST -06:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAdmin Exists (1.1ms)[0m  SELECT 1 AS one FROM "admins" WHERE ("admins"."email" = 'a@store.com' AND "admins"."id" != 204) LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
